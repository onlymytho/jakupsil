<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Jakupsil</title>
        <!-- <link rel="stylesheet" href="https://unpkg.com/tippy.js@1.3.0/dist/tippy.css">
        <script src="https://unpkg.com/tippy.js@1.3.0/dist/tippy.min.js"></script> -->

        <!-- og tags -->
        <meta property="og:title" content="JAKUPSIL IN YEONNAM">
        <meta property="og:url" content="http://jakupsil.com/">
        <meta property="og:image" content="https://scontent-hkg3-1.cdninstagram.com/t51.2885-15/e35/22157185_1876354229284743_4635429160280391680_n.jpg">

        <!-- Stylesheet -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" media="screen and (min-width: 800px)" href="./asset/base.css" />
        <link rel='stylesheet' media="screen and (max-width: 800px)" href='./asset/mobile_base.css' />

        <!-- GA: Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63621212-4"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-63621212-4');
        </script>

        <!-- Import libraries -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://afarkas.github.io/webshim/js-webshim/minified/polyfiller.js"></script>
        <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>

        <!-- Functions -->
        <script type="text/javascript">
            (function(){
                emailjs.init("user_SrwuDhdxfbpjOtsNl1l2G");
            })();
            var sendMail = function() {
                /*
                    Send email by using emailjs.
                */

                // Send input data as sanghyuk_jung user and jakupsil template with name, phone, email and date parameters.
                emailjs.send("sanghyuk_jung","jakupsil",{
                    name: document.querySelector('input#name').value,
                    phone: document.querySelector('input#phone').value,
                    email: document.querySelector('input#email').value,
                    date: document.querySelector('input#date').value
                })
                .then(
                    function(response) {
                        console.log("SUCCESS", response);
                    },
                    function(error) {
                        console.log("FAILED", error);
                    }
                );
            };
            var reserve_submit = function() {
                    /*
                        Validate inputs and if all is filled, send email.
                    */
                    // Validate inputs
                    for (i=0; i<document.querySelectorAll('form input').length; i++) {
                        if (document.querySelectorAll('form input')[i].value == "") {
                            // If there's an empty input, show alert
                            alert('항목을 모두 입력해주세요. (' + document.querySelectorAll('form input')[i].name + ')')
                            return false
                        }
                        else {
                            continue
                        }
                    }
                    // If all input is filled, send email
                    sendMail()
                    alert('예약신청이 접수되었습니다. 빠른 시일 내에 연락드리곘습니다. 감사합니다.')
                    return true
            }

            // Calendar UI by using webshim library
            var calendar = function() {
                webshim.polyfill('es5 mediaelement forms');
                webshim.setOptions('forms-ext', {
                    replaceUI: 'auto',
                    types: 'date',
                    date: {
                        startView: 2,
                        inlinePicker: true,
                        classes: 'date_picker'
                }
                });
                //start polyfilling
                webshim.polyfill('forms forms-ext');
            }
            calendar()


        </script>
    </head>
    <body onscroll="topnavi_control()">
        <div class="topnavi">
            <a href="index.html">
                <div class="title">
                    JAKUPSIL IN YEONNAM
                </div>
            </a>
            <a href="#reservation">
                <div class="reserve">
                    RESERVE >
                </div>
            </a>
        </div>
        <div class="content">
            <div class="init_block">
                <div id="info" class="init_block_item">
                    <a href="index.html">
                        <div id="title" class="info_item">
                            JAKUPSIL<br>IN<br>YEONNAM
                        </div>
                    </a>
                    <!-- <div id="contact" class=info_item>
                        <div class="title">
                            REVIEW.
                        </div>
                        <div class="desc_contact">
                            - 여기서 실패하면 그 사람이 잘못된 거에요!<br>
                            - 여자친구가 너무 좋아하네요ㅎㅎ<br>
                            - 대박입니다. 대성공이에요ㅜㅜ
                        </div>
                    </div> -->
                    <div id='reservation' class="info_item">
                        <div class="title">
                            RESERVATION.
                        </div>
                        <div class="reserve_form">
                            <form action="#" class="reserve_form">
                                <div id="reserve_calendar" class="form_item">
                                    <input id="date" type="date" name="날짜"class="date_picker">
                                </div>
                                <input id="name" type="text" name="이름" value="" placeholder="NAME" required>
                                <input id="phone" type="tel" name="휴대폰 번호" value="" placeholder="PHONE">
                                <input id="email" type="email" name="이메일" value="" placeholder="EMAIL">
                                <button id="submit" type="button" name="button" onclick="reserve_submit()">RESERVE ></button>
                            </form>
                        </div>
                    </div>
                </div>
                <div id="img" class="init_block_item">
                    <div id="init" class="item_img" src="https://scontent-hkg3-1.cdninstagram.com/t51.2885-15/e35/22157185_1876354229284743_4635429160280391680_n.jpg"> </div>

                    <div class="item_img_desc">
                        2017.10.09 We want to make our website.
                    </div>
                </div>
            </div>
            <div class="img_block">
                <div class="img_wrapper">
                    <div id="img1" class="item_img"> </div>
                    <div class="item_img_desc">
                        item image is from Paris
                    </div>
                </div>
            </div>
            <div class="footer"></div>
        </div>

        <script type="text/javascript">
            // Shuffle the position of images
            let content_width = window.getComputedStyle(document.getElementsByClassName('content')[0]).getPropertyValue('width').split("px")[0]

            leftmargins = [1, 2, 'center']
            for (var i=0; i<document.getElementsByClassName('img_wrapper').length; i++){
                r = Math.floor(Math.random() * 4)
                leftmargin = leftmargins[r]

                if (leftmargin == 'center') {
                    document.getElementsByClassName('img_wrapper')[i].style.margin = '0 auto'
                }
                if (leftmargin == 'right'){
                    document.getElementsByClassName('img_wrapper')[i].style.float = 'left'
                    // document.getElementsByClassName('img_wrapper')[i].style.marginLeft = leftmargin + 'px';
                }
            }

            // Show and hide topnavi by device and scrolling
            var topnavi_control = function() {
                console.log(window.scrollY)
                if (window.innerWidth <= 800) {
                    if (window.scrollY > 500) {
                      document.getElementsByClassName('topnavi')[0].classList.add('show')
                    //   console.log('show')
                    }
                    else {
                      document.getElementsByClassName('topnavi')[0].classList.remove('show')
                    //   console.log('hide')
                    }
                }
            }
        </script>
    </body>
</html>
